<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compare PDF Files Online Free - Side-by-Side PDF Comparison | PDFrow</title>
    <meta name="description" content="Compare two PDF files online for free. See differences side-by-side or with overlay mode. Identify changes, highlight differences, and download comparison reports. Fast, secure, client-side processing.">
    <meta name="keywords" content="compare PDF, PDF comparison, diff PDF, PDF difference, compare two PDFs, PDF compare online, side-by-side PDF, overlay PDF comparison, find differences PDF, PDF changes">
    <meta name="author" content="PDFrow">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">

    <!-- Open Graph meta tags -->
    <meta property="og:title" content="Compare PDF Files Online Free - Side-by-Side PDF Comparison | PDFrow">
    <meta property="og:description" content="Compare two PDF files online for free. See differences side-by-side or with overlay mode. Identify changes and highlight differences instantly.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://pdfrow.com/compare-pdf">
    <meta property="og:image" content="https://pdfrow.com/og-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="PDFrow PDF Comparison Tool - Compare PDFs Online">
    <meta property="og:site_name" content="PDFrow">

    <!-- Twitter Card meta tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Compare PDF Files Online Free - Side-by-Side PDF Comparison | PDFrow">
    <meta name="twitter:description" content="Compare two PDF files online for free. See differences side-by-side or with overlay mode. Identify changes and highlight differences instantly.">
    <meta name="twitter:image" content="https://pdfrow.com/og-image.png">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://pdfrow.com/compare-pdf.html">

    <!-- Apple meta tags -->
    <meta name="application-name" content="PDFrow">
    <meta name="apple-mobile-web-app-title" content="PDFrow">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">
    <link rel="apple-touch-icon" href="icon-192.png">

    <!-- Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Preload critical resources -->
    <link rel="preload" href="styles.css" as="style">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="auth.css">
    <link rel="stylesheet" href="url-import.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    <script src="theme-loader.js"></script>

    <!-- Logo Size Customization -->
    <style>
        .logo-image {
            width: 56px !important;
            height: 56px !important;
        }

        .logo-text {
            font-size: 1.6rem !important;
            font-weight: 600 !important;
        }

        .footer .logo-image {
            width: 48px !important;
            height: 48px !important;
        }

        .footer .logo-text {
            font-size: 1.3rem !important;
        }

        .logo {
            align-items: center !important;
            gap: 0.75rem !important;
        }
    </style>

    <!-- Page-specific styles -->
    <style>
        .page-header {
            position: relative;
            padding: 1rem 0 2rem 0;
            margin-top: 6rem;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            border-bottom: 1px solid var(--border-color);
        }

        .page-header-background {
            position: absolute;
            inset: 0;
            overflow: hidden;
        }

        .header-decoration {
            position: absolute;
            top: 0;
            right: 0;
            width: 300px;
            height: 200px;
            background: linear-gradient(135deg, var(--accent-primary) 10%, transparent 70%);
            opacity: 0.1;
            border-radius: 50%;
            transform: translate(30%, -30%);
        }

        .page-header-content {
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .breadcrumb-link {
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .breadcrumb-link:hover {
            color: var(--accent-primary);
        }

        .breadcrumb-current {
            color: var(--text-primary);
            font-weight: 500;
        }

        .page-title-section {
            display: flex;
            align-items: flex-start;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .tool-icon-large {
            flex-shrink: 0;
        }

        .icon-background {
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            box-shadow: 0 8px 32px rgba(var(--accent-primary-rgb), 0.3);
        }

        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin: 0 0 0.5rem 0;
            line-height: 1.2;
        }

        .page-description {
            font-size: 1.125rem;
            color: var(--text-secondary);
            line-height: 1.6;
            margin: 0;
            max-width: 600px;
        }

        .tool-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-primary);
            transition: all 0.2s ease;
        }

        .feature-item:hover {
            border-color: var(--accent-primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .feature-item svg {
            color: var(--accent-primary);
            flex-shrink: 0;
        }

        .security-badge {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 0.875rem;
            color: var(--text-secondary);
            max-width: fit-content;
        }

        .security-badge svg {
            color: var(--accent-primary);
            flex-shrink: 0;
        }

        /* Upload Section */
        .upload-section {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .upload-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .upload-card {
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 16px;
            padding: 2rem;
            transition: all 0.3s ease;
        }

        .upload-card:hover {
            border-color: var(--accent-primary);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
        }

        .upload-card-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .upload-card-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .upload-card-icon.second {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
        }

        .upload-card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .upload-area-small {
            position: relative;
            border: 2px dashed var(--border-color);
            border-radius: 12px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--bg-primary);
        }

        .upload-area-small .file-input {
            position: absolute !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
            opacity: 0 !important;
            cursor: pointer !important;
            z-index: 10 !important;
            pointer-events: auto !important;
        }

        .upload-area-small > *:not(.file-input) {
            pointer-events: none;
        }

        .upload-area-small:hover {
            border-color: var(--accent-primary);
            background: var(--bg-secondary);
        }

        .upload-area-small.has-file {
            border-color: var(--accent-primary);
            background: rgba(76, 175, 80, 0.05);
        }

        .upload-icon-small {
            margin-bottom: 1rem;
        }

        .upload-text-small {
            font-size: 0.95rem;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .upload-subtext-small {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .file-info {
            display: none;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--bg-secondary);
            border-radius: 8px;
            margin-top: 1rem;
        }

        .file-info.active {
            display: flex;
        }

        .file-info-icon {
            color: var(--accent-primary);
        }

        .file-info-details {
            flex: 1;
        }

        .file-info-name {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .file-info-size {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .btn-remove-file {
            padding: 0.5rem 0.75rem;
            background: transparent;
            border: 1px solid #ef4444;
            color: #ef4444;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .btn-remove-file:hover {
            background: #ef4444;
            color: white;
        }

        .btn-change-file {
            padding: 0.5rem 0.75rem;
            background: transparent;
            border: 1px solid var(--accent-primary);
            color: var(--accent-primary);
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .btn-change-file:hover {
            background: var(--accent-primary);
            color: white;
        }

        .file-actions {
            display: flex;
            gap: 0.5rem;
        }

        .compare-btn-container {
            text-align: center;
        }

        .btn-compare {
            padding: 1rem 3rem;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .btn-compare:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }

        .btn-compare:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Comparison View */
        .comparison-view {
            display: none;
            max-width: 1600px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .comparison-view.active {
            display: block;
        }

        .comparison-controls {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .controls-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .view-mode-toggle {
            display: flex;
            gap: 0.5rem;
            background: var(--bg-primary);
            padding: 0.5rem;
            border-radius: 8px;
        }

        .mode-btn {
            padding: 0.75rem 1.5rem;
            background: transparent;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text-primary);
        }

        .mode-btn.active {
            background: var(--accent-primary);
            color: white;
        }

        .zoom-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .zoom-btn {
            padding: 0.5rem 1rem;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text-primary);
        }

        .zoom-btn:hover {
            border-color: var(--accent-primary);
        }

        .zoom-level {
            font-weight: 600;
            color: var(--text-primary);
            min-width: 60px;
            text-align: center;
        }

        .page-navigation {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .nav-btn {
            padding: 0.5rem 1rem;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text-primary);
        }

        .nav-btn:hover:not(:disabled) {
            border-color: var(--accent-primary);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .page-info {
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Side by Side View */
        .comparison-container {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 2rem;
            min-height: 600px;
        }

        .side-by-side-view {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .pdf-panel {
            display: flex;
            flex-direction: column;
        }

        .panel-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid var(--border-color);
        }

        .panel-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .difference-badge {
            padding: 0.35rem 0.75rem;
            background: #ef4444;
            color: white;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .canvas-wrapper {
            position: relative;
            background: #525659;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 500px;
            overflow: auto;
        }

        .pdf-canvas {
            display: block;
            max-width: 100%;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        /* Overlay View */
        .overlay-view {
            display: none;
        }

        .overlay-view.active {
            display: block;
        }

        .overlay-container {
            position: relative;
            background: #525659;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 600px;
            overflow: auto;
        }

        .overlay-canvas-wrapper {
            position: relative;
        }

        .overlay-slider-container {
            margin-top: 1.5rem;
        }

        .overlay-slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: var(--border-color);
            outline: none;
            -webkit-appearance: none;
        }

        .overlay-slider::-webkit-slider-runnable-track {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: var(--border-color);
        }

        .overlay-slider::-moz-range-track {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: var(--border-color);
        }

        .overlay-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--accent-primary);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .overlay-slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--accent-primary);
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        /* Light mode slider styles */
        body:not(.dark-mode) .overlay-slider {
            background: #d1d5db;
            border: 1px solid #9ca3af;
        }

        body:not(.dark-mode) .overlay-slider::-webkit-slider-runnable-track {
            background: #d1d5db;
            border: 1px solid #9ca3af;
        }

        body:not(.dark-mode) .overlay-slider::-moz-range-track {
            background: #d1d5db;
            border: 1px solid #9ca3af;
        }

        body:not(.dark-mode) .overlay-slider::-webkit-slider-thumb {
            background: #7c3aed;
            box-shadow: 0 2px 8px rgba(124, 58, 237, 0.3);
            border: 2px solid white;
        }

        body:not(.dark-mode) .overlay-slider::-moz-range-thumb {
            background: #7c3aed;
            box-shadow: 0 2px 8px rgba(124, 58, 237, 0.3);
            border: 2px solid white;
        }

        .difference-highlights {
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
        }

        .diff-box {
            position: absolute;
            border: 2px solid #ef4444;
            background: rgba(239, 68, 68, 0.2);
            border-radius: 2px;
        }

        /* Success State */
        .success-state {
            display: none;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
            padding: 3rem 2rem;
            max-width: 800px;
            margin: 2rem auto;
            background: var(--bg-primary);
        }

        .success-state.active {
            display: flex;
        }

        .success-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #10b981, #059669);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: successPop 0.5s ease;
        }

        @keyframes successPop {
            0% { transform: scale(0); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .success-message h3 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin: 0 0 0.5rem 0;
            text-align: center;
        }

        .success-message p {
            color: var(--text-secondary);
            margin: 0;
            text-align: center;
        }

        .success-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn-secondary {
            padding: 0.875rem 1.5rem;
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-secondary:hover {
            background: var(--bg-secondary);
            border-color: var(--accent-primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .continue-section {
            width: 100%;
            max-width: 600px;
            margin-top: 1rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border-color);
        }

        .continue-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0 0 1rem 0;
            text-align: center;
        }

        .continue-tools {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .continue-tool-btn {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.75rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            padding: 1rem;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-primary);
            font-size: 0.9rem;
            font-weight: 500;
        }

        .continue-tool-btn:hover {
            background: var(--bg-primary);
            border-color: var(--accent-primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.2);
        }

        .continue-tool-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 35px;
            height: 35px;
        }

        .continue-tool-btn span {
            flex: 1;
            text-align: left;
        }

        .continue-arrow {
            stroke: var(--text-secondary);
            flex-shrink: 0;
            transition: transform 0.3s ease;
        }

        .continue-tool-btn:hover .continue-arrow {
            transform: translateX(3px);
            stroke: var(--accent-primary);
        }

        .loading-state {
            display: none;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            padding: 3rem;
            text-align: center;
        }

        .loading-state.active {
            display: flex;
            flex-direction: column;
        }

        .loading-spinner {
            width: 48px;
            height: 48px;
            border: 4px solid var(--border-color);
            border-top: 4px solid var(--accent-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-top: 1rem;
        }

        @media (max-width: 1024px) {
            .upload-grid {
                grid-template-columns: 1fr;
            }

            .side-by-side-view {
                grid-template-columns: 1fr;
            }

            .controls-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.75rem;
            }

            #close-comparison-btn {
                width: 100%;
                justify-content: center;
            }
        }

        @media (max-width: 768px) {
            .page-title {
                font-size: 2rem;
            }

            .tool-features {
                grid-template-columns: 1fr;
            }

            .file-actions {
                flex-direction: column;
            }

            .btn-change-file,
            .btn-remove-file {
                width: 100%;
                justify-content: center;
            }

            .file-info {
                flex-direction: column;
                align-items: flex-start;
            }

            .file-info-details {
                width: 100%;
                margin: 0.5rem 0;
            }
        }
    </style>
</head>
<body class="dark-mode">
    <div class="container">
        <nav class="main-nav">
            <div class="nav-container">
                <a href="/" class="logo">
                    <div class="logo-icon">
                        <img src="Official Logo PDFrow.png" alt="PDFrow Logo" class="logo-image">
                    </div>
                    <h1 class="logo-text">PDFrow</h1>
                </a>

                <div class="nav-links">
                    <a href="/" class="nav-link" data-translate="nav_tools">Tools</a>
                    <a href="/" class="nav-link" data-translate="nav_features">Features</a>
                    <a href="/" class="nav-link" data-translate="nav_how_it_works">How It Works</a>
                    <a href="/" class="nav-link" data-translate="nav_blog">Blog</a>
                    <a href="/" class="nav-link" data-translate="nav_faq">FAQ</a>
                </div>

                <div class="nav-actions">
                    <!-- Auth Buttons -->
                    <div id="auth-buttons" class="auth-buttons">
                        <button class="btn-auth btn-login" id="loginBtn" data-translate="btn_login">Login</button>
                        <button class="btn-auth btn-signup" id="signupBtn" data-translate="btn_signup">Sign Up</button>
                    </div>

                    <!-- User Menu -->
                    <div id="user-menu" class="user-menu" style="display: none;">
                        <div class="user-avatar" id="userAvatar">U</div>
                        <span class="user-email">user@example.com</span>
                        <div class="user-dropdown">
                            <button class="dropdown-item" id="profileBtn" data-translate="btn_profile">Profile</button>
                            <button class="dropdown-item" id="logoutBtn" data-translate="btn_logout">Logout</button>
                        </div>
                    </div>

                    <div class="theme-toggle" id="theme-toggle">
                        <div class="theme-toggle-track">
                            <div class="theme-toggle-thumb">
                                <svg class="theme-icon sun-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="5"/>
                                    <path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                                </svg>
                                <svg class="theme-icon dimmed-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 3a6.364 6.364 0 0 0 9 9 9 9 0 1 1-9-9Z"/>
                                    <path d="M20 3v4m-2-2h4"/>
                                </svg>
                                <svg class="theme-icon moon-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Page Header -->
        <header class="page-header">
            <div class="page-header-background">
                <div class="header-decoration"></div>
            </div>
            <div class="page-header-content">
                <nav class="breadcrumb">
                    <a href="/" class="breadcrumb-link" data-translate="breadcrumb_home">Home</a>
                    <span>/</span>
                    <span class="breadcrumb-current" data-translate="breadcrumb_current">Compare PDF</span>
                </nav>

                <div class="page-title-section">
                    <div class="tool-icon-large">
                        <div class="icon-background">
                            <img src="Compare-pdf.png" alt="Compare PDF Icon" style="width: 50px; height: 50px;">
                        </div>
                    </div>
                    <div>
                        <h1 class="page-title" data-translate="page_title">Compare PDF Files</h1>
                        <p class="page-description" data-translate="page_description">Compare two PDF files side-by-side or with overlay mode. Instantly identify differences and changes between documents.</p>
                    </div>
                </div>

                <div class="tool-features">
                    <div class="feature-item">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 11h6M9 15h6M5 5h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2z"/>
                        </svg>
                        <span data-translate="feature_side_by_side">Side-by-side comparison</span>
                    </div>
                    <div class="feature-item">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 16v-4M12 8h.01"/>
                        </svg>
                        <span data-translate="feature_overlay">Overlay mode with slider</span>
                    </div>
                    <div class="feature-item">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                        </svg>
                        <span data-translate="feature_secure">100% secure & private</span>
                    </div>
                    <div class="feature-item">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12 6 12 12 16 14"/>
                        </svg>
                        <span data-translate="feature_instant">Instant comparison</span>
                    </div>
                </div>

                <div class="security-badge">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                        <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                    </svg>
                    <span data-translate="security_badge">Your files are processed locally in your browser. They never leave your device.</span>
                </div>
            </div>
        </header>

        <!-- Upload Section -->
        <section class="upload-section" id="upload-section">
            <div class="upload-grid">
                <!-- First PDF -->
                <div class="upload-card">
                    <div class="upload-card-header">
                        <div class="upload-card-icon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <polyline points="14 2 14 8 20 8"/>
                                <path d="M9 13h6M9 17h3"/>
                            </svg>
                        </div>
                        <h2 class="upload-card-title" data-translate="original_pdf">Original PDF</h2>
                    </div>
                    <div class="upload-area-small" id="upload-area-1">
                        <input type="file" class="file-input" id="file-input-1" accept=".pdf">
                        <div class="upload-icon-small">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#4CAF50" stroke-width="1.5">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                <polyline points="17 8 12 3 7 8"/>
                                <line x1="12" y1="3" x2="12" y2="15"/>
                            </svg>
                        </div>
                        <div class="upload-text-small" data-translate="click_select_first">Click to select first PDF</div>
                        <p class="upload-subtext-small" data-translate="max_size">Max 50MB</p>
                    </div>
                    <div class="file-info" id="file-info-1">
                        <div class="file-info-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <polyline points="14 2 14 8 20 8"/>
                            </svg>
                        </div>
                        <div class="file-info-details">
                            <div class="file-info-name" id="file-name-1"></div>
                            <div class="file-info-size" id="file-size-1"></div>
                        </div>
                        <div class="file-actions">
                            <button class="btn-change-file" id="change-file-1">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                    <polyline points="17 8 12 3 7 8"/>
                                    <line x1="12" y1="3" x2="12" y2="15"/>
                                </svg>
                                <span data-translate="btn_change">Change</span>
                            </button>
                            <button class="btn-remove-file" id="remove-file-1">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18"/>
                                    <line x1="6" y1="6" x2="18" y2="18"/>
                                </svg>
                                <span data-translate="btn_remove">Remove</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Second PDF -->
                <div class="upload-card">
                    <div class="upload-card-header">
                        <div class="upload-card-icon second">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <polyline points="14 2 14 8 20 8"/>
                                <path d="M9 13h6M9 17h3"/>
                            </svg>
                        </div>
                        <h2 class="upload-card-title" data-translate="modified_pdf">Modified PDF</h2>
                    </div>
                    <div class="upload-area-small" id="upload-area-2">
                        <input type="file" class="file-input" id="file-input-2" accept=".pdf">
                        <div class="upload-icon-small">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#8b5cf6" stroke-width="1.5">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                <polyline points="17 8 12 3 7 8"/>
                                <line x1="12" y1="3" x2="12" y2="15"/>
                            </svg>
                        </div>
                        <div class="upload-text-small" data-translate="click_select_second">Click to select second PDF</div>
                        <p class="upload-subtext-small" data-translate="max_size">Max 50MB</p>
                    </div>
                    <div class="file-info" id="file-info-2">
                        <div class="file-info-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <polyline points="14 2 14 8 20 8"/>
                            </svg>
                        </div>
                        <div class="file-info-details">
                            <div class="file-info-name" id="file-name-2"></div>
                            <div class="file-info-size" id="file-size-2"></div>
                        </div>
                        <div class="file-actions">
                            <button class="btn-change-file" id="change-file-2">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                    <polyline points="17 8 12 3 7 8"/>
                                    <line x1="12" y1="3" x2="12" y2="15"/>
                                </svg>
                                <span data-translate="btn_change">Change</span>
                            </button>
                            <button class="btn-remove-file" id="remove-file-2">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18"/>
                                    <line x1="6" y1="6" x2="18" y2="18"/>
                                </svg>
                                <span data-translate="btn_remove">Remove</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="compare-btn-container">
                <button class="btn-compare" id="compare-btn" disabled>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: inline-block; margin-right: 0.5rem;">
                        <path d="M9 11h6M9 15h6"/>
                    </svg>
                    <span data-translate="btn_compare">Compare PDFs</span>
                </button>
                <button class="btn-secondary" id="clear-all-btn" style="display: none; margin-top: 1rem;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="3 6 5 6 21 6"/>
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                    </svg>
                    <span data-translate="btn_clear_all">Clear All Files</span>
                </button>
            </div>
        </section>

        <!-- Loading State -->
        <div class="loading-state" id="loading-state">
            <div class="loading-spinner"></div>
            <div class="loading-text" data-translate="comparing_pdfs">Comparing PDFs...</div>
        </div>

        <!-- Comparison View -->
        <section class="comparison-view" id="comparison-view">
            <div class="comparison-controls">
                <div class="controls-row">
                    <div class="view-mode-toggle">
                        <button class="mode-btn active" id="mode-side-by-side">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: inline-block; margin-right: 0.5rem;">
                                <rect x="3" y="3" width="7" height="18"/>
                                <rect x="14" y="3" width="7" height="18"/>
                            </svg>
                            <span data-translate="mode_side_by_side">Side by Side</span>
                        </button>
                        <button class="mode-btn" id="mode-overlay">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: inline-block; margin-right: 0.5rem;">
                                <rect x="3" y="3" width="18" height="18"/>
                                <rect x="8" y="8" width="8" height="8"/>
                            </svg>
                            <span data-translate="mode_overlay">Overlay</span>
                        </button>
                    </div>

                    <div class="zoom-controls">
                        <button class="zoom-btn" id="zoom-out">âˆ’</button>
                        <span class="zoom-level" id="zoom-level">100%</span>
                        <button class="zoom-btn" id="zoom-in">+</button>
                    </div>

                    <div class="page-navigation">
                        <button class="nav-btn" id="prev-page" data-translate="btn_previous">Previous</button>
                        <span class="page-info"><span data-translate="page_of">Page</span> <span id="current-page">1</span> <span data-translate="of">of</span> <span id="total-pages">1</span></span>
                        <button class="nav-btn" id="next-page" data-translate="btn_next">Next</button>
                    </div>

                    <button class="btn-secondary" id="close-comparison-btn" style="padding: 0.75rem 1.5rem;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                        <span data-translate="btn_close_upload">Close & Upload New Files</span>
                    </button>
                </div>
            </div>

            <div class="comparison-container">
                <!-- Side by Side View -->
                <div class="side-by-side-view" id="side-by-side-container">
                    <div class="pdf-panel">
                        <div class="panel-header">
                            <span class="panel-title" data-translate="panel_original">Original PDF</span>
                            <span class="difference-badge" id="diff-count-1" style="display: none;">0 <span data-translate="differences">differences</span></span>
                        </div>
                        <div class="canvas-wrapper" id="canvas-wrapper-1">
                            <canvas id="pdf-canvas-1" class="pdf-canvas"></canvas>
                        </div>
                    </div>
                    <div class="pdf-panel">
                        <div class="panel-header">
                            <span class="panel-title" data-translate="panel_modified">Modified PDF</span>
                            <span class="difference-badge" id="diff-count-2" style="display: none;">0 <span data-translate="differences">differences</span></span>
                        </div>
                        <div class="canvas-wrapper" id="canvas-wrapper-2">
                            <canvas id="pdf-canvas-2" class="pdf-canvas"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Overlay View -->
                <div class="overlay-view" id="overlay-container">
                    <div class="overlay-container">
                        <div class="overlay-canvas-wrapper">
                            <canvas id="overlay-canvas-1" class="pdf-canvas"></canvas>
                            <canvas id="overlay-canvas-2" class="pdf-canvas" style="position: absolute; top: 0; left: 0;"></canvas>
                        </div>
                    </div>
                    <div class="overlay-slider-container">
                        <input type="range" min="0" max="100" value="50" class="overlay-slider" id="overlay-slider">
                    </div>
                </div>
            </div>
        </section>

        <!-- Success State -->
        <div class="success-state" id="success-state">
            <div class="success-icon">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="20 6 9 17 4 12"></polyline>
                </svg>
            </div>

            <div class="success-message">
                <h3 data-translate="success_title">Comparison Completed!</h3>
                <p data-translate="success_description">Your PDFs have been compared successfully</p>
            </div>

            <div class="success-actions">
                <button class="btn-primary" id="download-report-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="7 10 12 15 17 10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    <span data-translate="btn_download_report">Download Report</span>
                </button>
                <button class="btn-secondary" id="compare-another-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 11h6M9 15h6"/>
                    </svg>
                    <span data-translate="btn_compare_another">Compare Another</span>
                </button>
            </div>

            <!-- Continue to other tools -->
            <div class="continue-section">
                <h4 class="continue-title" data-translate="continue_with">Continue with...</h4>
                <div class="continue-tools">
                    <button class="continue-tool-btn" data-tool="merge-pdf">
                        <div class="continue-tool-icon">
                            <img src="merge-pdf.png" alt="Merge PDF" style="width: 35px; height: 35px; object-fit: contain;">
                        </div>
                        <span>Merge PDF</span>
                        <svg class="continue-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"/>
                        </svg>
                    </button>

                    <button class="continue-tool-btn" data-tool="compress-pdf">
                        <div class="continue-tool-icon">
                            <img src="compress-pdf-png.png" alt="Compress PDF" style="width: 35px; height: 35px; object-fit: contain;">
                        </div>
                        <span>Compress PDF</span>
                        <svg class="continue-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"/>
                        </svg>
                    </button>

                    <button class="continue-tool-btn" data-tool="protect-pdf">
                        <div class="continue-tool-icon">
                            <img src="protect-pdf.png" alt="Protect PDF" style="width: 30px; height: 30px; object-fit: contain;">
                        </div>
                        <span>Protect PDF</span>
                        <svg class="continue-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"/>
                        </svg>
                    </button>

                    <button class="continue-tool-btn" data-tool="split-pdf">
                        <div class="continue-tool-icon">
                            <img src="split-pdf.png" alt="Split PDF" style="width: 35px; height: 35px; object-fit: contain;">
                        </div>
                        <span>Split PDF</span>
                        <svg class="continue-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <footer class="footer">
            <div class="footer-content">
                <div class="footer-main">
                    <div class="footer-brand">
                        <div class="logo">
                            <div class="logo-icon">
                                <img src="Official Logo PDFrow.png" alt="PDFrow Logo" class="logo-image">
                            </div>
                            <h3 class="logo-text">PDFrow</h3>
                        </div>
                        <p class="footer-description">
                            Next-generation document processing platform. Fast, secure, and always free.
                        </p>
                        <div class="footer-social">
                            <a href="https://instagram.com/pdfrow" class="social-link" aria-label="Follow us on Instagram">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="2" y="2" width="20" height="20" rx="5" ry="5"/>
                                    <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/>
                                    <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/>
                                </svg>
                            </a>
                            <a href="mailto:contact@pdfrow.com" class="social-link" aria-label="Contact us via email">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                    <polyline points="22,6 12,13 2,6"/>
                                </svg>
                            </a>
                        </div>
                    </div>

                    <div class="footer-links">
                        <div class="footer-column">
                            <h4>Tools</h4>
                            <ul>
                                <li><a href="compress-pdf.html">Compress PDF</a></li>
                                <li><a href="merge-pdf.html">Merge PDF</a></li>
                                <li><a href="split-pdf.html">Split PDF</a></li>
                                <li><a href="compare-pdf.html">Compare PDF</a></li>
                            </ul>
                        </div>

                        <div class="footer-column">
                            <h4>Support</h4>
                            <ul>
                                <li><a href="/">FAQ</a></li>
                                <li><a href="/">How It Works</a></li>
                                <li><a href="/" id="footerContactLink">Contact</a></li>
                                <li><a href="terms-conditions.html">Terms & Conditions</a></li>
                                <li><a href="privacy-policy.html">Privacy Policy</a></li>
                            </ul>
                        </div>

                        <div class="footer-column">
                            <h4 data-translate="language">Language</h4>
                            <div class="language-dropdown">
                                <button class="language-btn" id="languageBtn">
                                    <span class="flag" id="currentFlag">ðŸ‡ºðŸ‡¸</span>
                                    <span id="currentLang">English</span>
                                    <svg class="dropdown-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polyline points="6,9 12,15 18,9"/>
                                    </svg>
                                </button>
                                <div class="language-menu" id="languageMenu">
                                    <button class="language-item" data-lang="en" data-flag="ðŸ‡ºðŸ‡¸"><span>ðŸ‡ºðŸ‡¸</span><span>English</span></button>
                                    <button class="language-item" data-lang="es" data-flag="ðŸ‡ªðŸ‡¸"><span>ðŸ‡ªðŸ‡¸</span><span>EspaÃ±ol</span></button>
                                    <button class="language-item" data-lang="fr" data-flag="ðŸ‡«ðŸ‡·"><span>ðŸ‡«ðŸ‡·</span><span>FranÃ§ais</span></button>
                                    <button class="language-item" data-lang="de" data-flag="ðŸ‡©ðŸ‡ª"><span>ðŸ‡©ðŸ‡ª</span><span>Deutsch</span></button>
                                    <button class="language-item" data-lang="it" data-flag="ðŸ‡®ðŸ‡¹"><span>ðŸ‡®ðŸ‡¹</span><span>Italiano</span></button>
                                    <button class="language-item" data-lang="tr" data-flag="ðŸ‡¹ðŸ‡·"><span>ðŸ‡¹ðŸ‡·</span><span>TÃ¼rkÃ§e</span></button>
                                    <button class="language-item" data-lang="pt" data-flag="ðŸ‡§ðŸ‡·"><span>ðŸ‡§ðŸ‡·</span><span>PortuguÃªs</span></button>
                                    <button class="language-item" data-lang="ru" data-flag="ðŸ‡·ðŸ‡º"><span>ðŸ‡·ðŸ‡º</span><span>Ð ÑƒÑÑÐºÐ¸Ð¹</span></button>
                                    <button class="language-item" data-lang="zh" data-flag="ðŸ‡¨ðŸ‡³"><span>ðŸ‡¨ðŸ‡³</span><span>ä¸­æ–‡</span></button>
                                    <button class="language-item" data-lang="ja" data-flag="ðŸ‡¯ðŸ‡µ"><span>ðŸ‡¯ðŸ‡µ</span><span>æ—¥æœ¬èªž</span></button>
                                    <button class="language-item" data-lang="ar" data-flag="ðŸ‡¸ðŸ‡¦"><span>ðŸ‡¸ðŸ‡¦</span><span>Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span></button>
                                    <button class="language-item" data-lang="hi" data-flag="ðŸ‡®ðŸ‡³"><span>ðŸ‡®ðŸ‡³</span><span>à¤¹à¤¿à¤¨à¥à¤¦à¥€</span></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="footer-bottom">
                    <p>&copy; <span id="current-year">2025</span> PDFrow. All rights reserved. Made with â¤ï¸ for document processing.</p>
                </div>
            </div>
        </footer>
    </div>

    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="supabase-config.js"></script>
    <script src="auth.js"></script>
    <script src="support.js"></script>
    <script src="script.js"></script>
    <script src="theme.js"></script>
    <script src="compare-pdf-translations.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

        let pdf1 = null;
        let pdf2 = null;
        let file1 = null;
        let file2 = null;
        let currentPage = 1;
        let totalPages = 1;
        let zoomLevel = 1.0;
        let currentMode = 'side-by-side';
        let differences = [];

        // DOM Elements - will be initialized after DOM loads
        let fileInput1, fileInput2, uploadArea1, uploadArea2, fileInfo1, fileInfo2;
        let compareBtn, uploadSection, loadingState, comparisonView, successState;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize DOM elements
            fileInput1 = document.getElementById('file-input-1');
            fileInput2 = document.getElementById('file-input-2');
            uploadArea1 = document.getElementById('upload-area-1');
            uploadArea2 = document.getElementById('upload-area-2');
            fileInfo1 = document.getElementById('file-info-1');
            fileInfo2 = document.getElementById('file-info-2');
            compareBtn = document.getElementById('compare-btn');
            uploadSection = document.getElementById('upload-section');
            loadingState = document.getElementById('loading-state');
            comparisonView = document.getElementById('comparison-view');
            successState = document.getElementById('success-state');

            console.log('DOM Elements initialized:', {
                fileInput1: !!fileInput1,
                fileInput2: !!fileInput2,
                uploadArea1: !!uploadArea1,
                uploadArea2: !!uploadArea2
            });

            // File input handlers
            fileInput1.addEventListener('change', (e) => handleFileSelect(e, 1));
            fileInput2.addEventListener('change', (e) => handleFileSelect(e, 2));

            // Upload area click handlers (as backup to direct input clicks)
            uploadArea1.addEventListener('click', (e) => {
                console.log('Upload area 1 clicked');
                if (e.target !== fileInput1) {
                    console.log('Triggering file input 1 click');
                    fileInput1.click();
                }
            });
            uploadArea2.addEventListener('click', (e) => {
                console.log('Upload area 2 clicked');
                if (e.target !== fileInput2) {
                    console.log('Triggering file input 2 click');
                    fileInput2.click();
                }
            });

            // Remove file buttons
            document.getElementById('remove-file-1').addEventListener('click', () => removeFile(1));
            document.getElementById('remove-file-2').addEventListener('click', () => removeFile(2));

            // Change file buttons
            document.getElementById('change-file-1').addEventListener('click', () => {
                console.log('Change file 1 clicked');
                fileInput1.click();
            });
            document.getElementById('change-file-2').addEventListener('click', () => {
                console.log('Change file 2 clicked');
                fileInput2.click();
            });

            // Clear all button
            document.getElementById('clear-all-btn').addEventListener('click', clearAllFiles);

            // Close comparison button
            document.getElementById('close-comparison-btn').addEventListener('click', resetComparison);

            // Compare button
            compareBtn.addEventListener('click', comparePDFs);

            // View mode toggle
            document.getElementById('mode-side-by-side').addEventListener('click', () => setViewMode('side-by-side'));
            document.getElementById('mode-overlay').addEventListener('click', () => setViewMode('overlay'));

            // Zoom controls
            document.getElementById('zoom-in').addEventListener('click', () => adjustZoom(0.1));
            document.getElementById('zoom-out').addEventListener('click', () => adjustZoom(-0.1));

            // Page navigation
            document.getElementById('prev-page').addEventListener('click', () => changePage(-1));
            document.getElementById('next-page').addEventListener('click', () => changePage(1));

            // Overlay slider
            document.getElementById('overlay-slider').addEventListener('input', (e) => {
                const canvas2 = document.getElementById('overlay-canvas-2');
                canvas2.style.opacity = e.target.value / 100;
            });

            // Success buttons
            document.getElementById('compare-another-btn').addEventListener('click', () => location.reload());
            document.getElementById('download-report-btn').addEventListener('click', downloadReport);

            // Continue workflow
            document.querySelectorAll('.continue-tool-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const tool = this.getAttribute('data-tool');
                    // Navigate to the selected tool
                    window.location.href = `${tool}.html`;
                });
            });
        });

        function handleFileSelect(event, fileNum) {
            console.log('handleFileSelect called for file', fileNum);
            const file = event.target.files[0];
            if (!file) {
                console.log('No file selected');
                return;
            }

            console.log('File selected:', file.name, 'Type:', file.type, 'Size:', file.size);

            if (file.type !== 'application/pdf') {
                alert('Please select a valid PDF file');
                return;
            }

            if (file.size > 50 * 1024 * 1024) {
                alert('File size must be less than 50MB');
                return;
            }

            if (fileNum === 1) {
                file1 = file;
                uploadArea1.classList.add('has-file');
                fileInfo1.classList.add('active');
                document.getElementById('file-name-1').textContent = file.name;
                document.getElementById('file-size-1').textContent = formatFileSize(file.size);
            } else {
                file2 = file;
                uploadArea2.classList.add('has-file');
                fileInfo2.classList.add('active');
                document.getElementById('file-name-2').textContent = file.name;
                document.getElementById('file-size-2').textContent = formatFileSize(file.size);
            }

            // Enable compare button if both files are selected
            if (file1 && file2) {
                compareBtn.disabled = false;
            }

            // Show clear all button if any file is selected
            const clearAllBtn = document.getElementById('clear-all-btn');
            if (file1 || file2) {
                clearAllBtn.style.display = 'inline-flex';
            }
        }

        function removeFile(fileNum) {
            if (fileNum === 1) {
                file1 = null;
                fileInput1.value = '';
                uploadArea1.classList.remove('has-file');
                fileInfo1.classList.remove('active');
            } else {
                file2 = null;
                fileInput2.value = '';
                uploadArea2.classList.remove('has-file');
                fileInfo2.classList.remove('active');
            }

            compareBtn.disabled = true;

            // Hide clear all button if no files are selected
            const clearAllBtn = document.getElementById('clear-all-btn');
            if (!file1 && !file2) {
                clearAllBtn.style.display = 'none';
            }
        }

        function clearAllFiles() {
            removeFile(1);
            removeFile(2);
        }

        function resetComparison() {
            // Hide comparison view
            comparisonView.classList.remove('active');

            // Show upload section
            uploadSection.style.display = 'block';

            // Clear all files
            clearAllFiles();

            // Reset PDFs
            pdf1 = null;
            pdf2 = null;
            currentPage = 1;
            totalPages = 1;
            zoomLevel = 1.0;

            // Clear canvases
            const canvas1 = document.getElementById('pdf-canvas-1');
            const canvas2 = document.getElementById('pdf-canvas-2');
            const overlayCanvas1 = document.getElementById('overlay-canvas-1');
            const overlayCanvas2 = document.getElementById('overlay-canvas-2');

            if (canvas1) canvas1.getContext('2d').clearRect(0, 0, canvas1.width, canvas1.height);
            if (canvas2) canvas2.getContext('2d').clearRect(0, 0, canvas2.width, canvas2.height);
            if (overlayCanvas1) overlayCanvas1.getContext('2d').clearRect(0, 0, overlayCanvas1.width, overlayCanvas1.height);
            if (overlayCanvas2) overlayCanvas2.getContext('2d').clearRect(0, 0, overlayCanvas2.width, overlayCanvas2.height);

            // Hide difference badges
            document.getElementById('diff-count-1').style.display = 'none';
            document.getElementById('diff-count-2').style.display = 'none';

            console.log('Comparison reset');
        }

        async function comparePDFs() {
            uploadSection.style.display = 'none';
            loadingState.classList.add('active');

            try {
                // Load both PDFs
                const arrayBuffer1 = await file1.arrayBuffer();
                const arrayBuffer2 = await file2.arrayBuffer();

                pdf1 = await pdfjsLib.getDocument({ data: arrayBuffer1 }).promise;
                pdf2 = await pdfjsLib.getDocument({ data: arrayBuffer2 }).promise;

                totalPages = Math.max(pdf1.numPages, pdf2.numPages);
                document.getElementById('total-pages').textContent = totalPages;

                loadingState.classList.remove('active');
                comparisonView.classList.add('active');

                // Render first page
                await renderComparison(1);

            } catch (error) {
                console.error('Error comparing PDFs:', error);
                alert('Error loading PDFs: ' + error.message);
                loadingState.classList.remove('active');
                uploadSection.style.display = 'block';
            }
        }

        async function renderComparison(pageNum) {
            currentPage = pageNum;
            document.getElementById('current-page').textContent = pageNum;

            // Update navigation buttons
            document.getElementById('prev-page').disabled = pageNum <= 1;
            document.getElementById('next-page').disabled = pageNum >= totalPages;

            if (currentMode === 'side-by-side') {
                await renderSideBySide(pageNum);
            } else {
                await renderOverlay(pageNum);
            }
        }

        async function renderSideBySide(pageNum) {
            const canvas1 = document.getElementById('pdf-canvas-1');
            const canvas2 = document.getElementById('pdf-canvas-2');
            const ctx1 = canvas1.getContext('2d');
            const ctx2 = canvas2.getContext('2d');

            // Render PDF 1
            if (pageNum <= pdf1.numPages) {
                const page1 = await pdf1.getPage(pageNum);
                const viewport1 = page1.getViewport({ scale: 1.5 * zoomLevel });
                canvas1.width = viewport1.width;
                canvas1.height = viewport1.height;
                await page1.render({ canvasContext: ctx1, viewport: viewport1 }).promise;
            } else {
                ctx1.clearRect(0, 0, canvas1.width, canvas1.height);
            }

            // Render PDF 2
            if (pageNum <= pdf2.numPages) {
                const page2 = await pdf2.getPage(pageNum);
                const viewport2 = page2.getViewport({ scale: 1.5 * zoomLevel });
                canvas2.width = viewport2.width;
                canvas2.height = viewport2.height;
                await page2.render({ canvasContext: ctx2, viewport: viewport2 }).promise;
            } else {
                ctx2.clearRect(0, 0, canvas2.width, canvas2.height);
            }

            // Simple pixel-based difference detection
            await detectDifferences(canvas1, canvas2);
        }

        async function renderOverlay(pageNum) {
            const canvas1 = document.getElementById('overlay-canvas-1');
            const canvas2 = document.getElementById('overlay-canvas-2');
            const ctx1 = canvas1.getContext('2d');
            const ctx2 = canvas2.getContext('2d');

            // Render PDF 1
            if (pageNum <= pdf1.numPages) {
                const page1 = await pdf1.getPage(pageNum);
                const viewport1 = page1.getViewport({ scale: 1.5 * zoomLevel });
                canvas1.width = viewport1.width;
                canvas1.height = viewport1.height;
                await page1.render({ canvasContext: ctx1, viewport: viewport1 }).promise;
            }

            // Render PDF 2
            if (pageNum <= pdf2.numPages) {
                const page2 = await pdf2.getPage(pageNum);
                const viewport2 = page2.getViewport({ scale: 1.5 * zoomLevel });
                canvas2.width = viewport2.width;
                canvas2.height = viewport2.height;
                canvas2.style.opacity = '0.5';
                await page2.render({ canvasContext: ctx2, viewport: viewport2 }).promise;
            }
        }

        async function detectDifferences(canvas1, canvas2) {
            const ctx1 = canvas1.getContext('2d');
            const ctx2 = canvas2.getContext('2d');

            // Ensure both canvases have the same dimensions
            const width = Math.min(canvas1.width, canvas2.width);
            const height = Math.min(canvas1.height, canvas2.height);

            const imageData1 = ctx1.getImageData(0, 0, width, height);
            const imageData2 = ctx2.getImageData(0, 0, width, height);

            let diffCount = 0;
            let totalPixels = 0;
            const threshold = 10; // More sensitive threshold (lower = more sensitive)

            for (let i = 0; i < imageData1.data.length; i += 4) {
                const r1 = imageData1.data[i];
                const g1 = imageData1.data[i + 1];
                const b1 = imageData1.data[i + 2];
                const a1 = imageData1.data[i + 3];

                const r2 = imageData2.data[i];
                const g2 = imageData2.data[i + 1];
                const b2 = imageData2.data[i + 2];
                const a2 = imageData2.data[i + 3];

                // Skip fully transparent pixels
                if (a1 === 0 && a2 === 0) {
                    continue;
                }

                totalPixels++;

                // Calculate color difference using Euclidean distance
                const rDiff = r1 - r2;
                const gDiff = g1 - g2;
                const bDiff = b1 - b2;
                const aDiff = a1 - a2;

                // Euclidean distance for more accurate comparison
                const colorDistance = Math.sqrt(rDiff * rDiff + gDiff * gDiff + bDiff * bDiff + aDiff * aDiff);

                if (colorDistance > threshold) {
                    diffCount++;
                }
            }

            // Calculate percentage based on actual compared pixels
            const diffPercentage = totalPixels > 0 ? (diffCount / totalPixels) * 100 : 0;

            // Always show the difference percentage
            const badge1 = document.getElementById('diff-count-1');
            const badge2 = document.getElementById('diff-count-2');

            badge1.style.display = 'block';
            badge2.style.display = 'block';

            if (diffPercentage < 0.01) {
                badge1.textContent = 'Identical';
                badge2.textContent = 'Identical';
                badge1.style.background = '#10b981'; // Green
                badge2.style.background = '#10b981';
            } else {
                badge1.textContent = `${diffPercentage.toFixed(2)}% different`;
                badge2.textContent = `${diffPercentage.toFixed(2)}% different`;
                badge1.style.background = '#ef4444'; // Red
                badge2.style.background = '#ef4444';
            }

            console.log(`Difference: ${diffPercentage.toFixed(2)}% (${diffCount} different pixels out of ${totalPixels})`);
        }

        function setViewMode(mode) {
            currentMode = mode;

            if (mode === 'side-by-side') {
                document.getElementById('mode-side-by-side').classList.add('active');
                document.getElementById('mode-overlay').classList.remove('active');
                document.getElementById('side-by-side-container').style.display = 'grid';
                document.getElementById('overlay-container').classList.remove('active');
            } else {
                document.getElementById('mode-overlay').classList.add('active');
                document.getElementById('mode-side-by-side').classList.remove('active');
                document.getElementById('side-by-side-container').style.display = 'none';
                document.getElementById('overlay-container').classList.add('active');
            }

            renderComparison(currentPage);
        }

        function adjustZoom(delta) {
            zoomLevel = Math.max(0.5, Math.min(3.0, zoomLevel + delta));
            document.getElementById('zoom-level').textContent = Math.round(zoomLevel * 100) + '%';
            renderComparison(currentPage);
        }

        function changePage(delta) {
            const newPage = currentPage + delta;
            if (newPage >= 1 && newPage <= totalPages) {
                renderComparison(newPage);
            }
        }

        async function downloadReport() {
            // Create a simple comparison report
            const reportText = `PDF Comparison Report
Generated: ${new Date().toLocaleString()}

File 1: ${file1.name}
File 2: ${file2.name}

Total Pages Compared: ${totalPages}

Comparison completed successfully.
`;

            const blob = new Blob([reportText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'comparison-report.txt';
            a.click();
            URL.revokeObjectURL(url);
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
    </script>
</body>
</html>
